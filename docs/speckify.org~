#+TITLE: Speckify Docs

* Navigation
** file:LICENSE.GPL

* Speckify
Use this to stream music from the internet or from playlist files containing file locations or URLs.  Built on mpv, ytdlp, sed, grep.

* Source Code
** Header stuff
I put these lines in my scripts so that I can grep the := to be reminded of what my scripts do.

#+begin_src sh :tangle "../../doc/speckify.sh"
  # Speckify Music
  # := Searches all playlists in the folder; returns output to screen and out.m3u playlist.
#+end_src

** Set up an internal path variable
This will be used to integrate speckify with metube and handle temp files generated while using this script.

#+begin_src sh :tangle "../../doc/speckify.sh"
path="$HOME/.clisuite/speckify/"
pl_loc="$HOME/Music/Stream/Playlists/"
#+end_src


** Help menu
#+begin_src sh :tangle "../../doc/speckify.sh"
printHelp(){
    echo "========SPECKIFY HELP=========="
    echo "speckify <option> <argument(s)>"
    echo "EXAMPLE:  speckify search \"heads carolina\""
    echo "1)  < -s or search > <\"search terms\">"
    echo "2)  < -c or choose > <line number of track title>"
    echo "3)  < play >         <\"PlaylistName\">"
    echo "4)  < shuffle >      <\"PlaylistName\">"
    echo "5)  < library >"
    echo "=============================="
}
#+end_src

** Main program
#+begin_src sh :tangle "../../doc/speckify.sh"
if [ -z "$1" ]; then
    printHelp
elif [ $1 == "-s" ] || [ $1 == "search" ]; then
    cd $pl_loc
    rm msearch.m3u
    grep -i "$2" *.m3u | cut -f2- -d: > msearch.m3u
    cat -n msearch.m3u
elif [ $1 == "-c" ] || [ $1 == "choose" ]; then
    cd $pl_loc
    line=$2
    line="${line}p"
    track=$(sed -n $line msearch.m3u)
    mpv --no-video $track
elif [ $1 == "play" ]; then
    cd $pl_loc
    list="$2"
    mpv --no-video ${pl_loc}${list}.m3u
elif [ $1 == "shuffle" ]; then
    cd $pl_loc
    list="$2"
    mpv --no-video --shuffle ${pl_loc}${list}.m3u
elif [ $1 == "library" ]; then
    cd $pl_loc
    ls *.m3u | cut -f1 -d. | more
else
    printHelp
fi
#+end_src

